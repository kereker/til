# 20191004 AWS超入門セミナーに参加した
のでそのメモ群

## オープニングセッション
- デジタル・ディスラプター
    - デジタルテクノロジーを駆使した市場者のこと
        - 自前の資産を持たない/少ない
        - 武器は「データ」と「AI」
- 最近はデータやAIを駆使できない会社の買収、倒産、事業撤退が多くみられる
- 「モノ」からサービスへ
    - モノを売るのではなく、モノを使ったサービスを売り込む
- ビジネス辞退、テクノロジーへの依存が高まっている
- ビジネスのスピードが速くなっている
- インフラ構築。運用はクラウドや自動化ツールに代替されつつある
- クラウド事業者が提供する資源を必要な時に必要なだけ使用する時代
- CAMBRIC(キャンボリック)
    - Cloud
    - IoT
    - BigDate
    - Ai
    - Mobility
    - Robotics
    - Cyber Security
- エンジニアにとってクラウドは「今」と「未来」を橋渡しする重要な技術

## テクニカルセッション1
- オンプレミスからクラウドへ
    - 従来のサーバー運用は「オンプレミス」
        - オンプレミス：自社が所有しているサーバー、データセンターで運用する  
        よって、サーバー等の調達、運用管理は自分たちで行う必要がある
    - クラウドプロバイダ
        - AWSなどが所有する設備を利用すること。  
        データセンターやサーバーの運用管理は必要なくなること
    - AWSでは
        - 初期費用が無料、数分で必要なリソースが調達可能
        - 世界中のリージョン(データセンター)を利用することができる
            - 日本だけではなく、海外にもう一つ以上のリージョンを利用することも可能
- リージョン
    - 地理的ロケーション
    - 最低２つのAZで構成される
    - 遠く離れた地域を選べば選ぶほど、レスポンスの遅延が起きるらしい
- AZ(アベイラビリティゾーン)
    - データセンターのクラスタ
    - 他のAZの障害から分離できる(リスク回避)
    - 日本には4つAZがある
- VPC(Virtual Private Cloud)
    - 特徴
        - AWSクラウド内で構築できる仮想プライベートネットワーク
        - オンプレミスネットワークと同様の構成
        - ネットワーク構成を完全にコントロールできる
    - 機能
        - IPの範囲を指定
        - ルートテーブルによるルーティング設定
        - ゲートウェイ
        - セキュリティ設定
- コンピューティングサービス
    - Amazon Elastic Compute Cloud(EC2)
        - 仮想サーバー、柔軟な構成と制御ができる
    - AWS Lambda
        - 利用したぶんだけ料金が発生、管理は不要
    - Amazon lightsail
        - VPNのこと
- EC2
    - アプリケーションサーバーやウェブサーバー等を稼働させることができる
    - 要件の変化に応じてキャパを拡大・縮小が可能
    - 使用した分((稼働時間)だけ課金される
    - サーバーOSはLinux、Window Serversのいずれか
    - 複数のリージョン、複数のAZにまたがったデプロイができる  
    サーバーに障害が起きても、そのリスクを軽減できる
    - AMi(アマゾンマシンイメージ)
        - OSのマシンイメージを保持
    - インスタンスタイプ
        - サーバーのスペックを決める、必要に応じて変更もできる
        - 名称はインスタンスファミリー、世代、インスタンスサイズの３構成で命名されている
    - タグの追加
        - リソースを整理するためにタグをつけることができる
    - セキュリティグループの設定
        - インターネットへの着信の許可設定(httpとかhttpsとか)
    - キーペア
        - SSHキーペアを生成(linux)
        - Windowsでは管理者アカウントのパスワード取得に利用する
- Amazon CloudWatch
    - AWS上のアプリケーションのモニタリングを行う
    - どんだけ稼働、CPUが動いたかをモニタリングすることができる
    - 超えるとアラートも出るようにできる
- Elastic Load BAlancing(ELB)
    - 複数のインスタンスにトラフィックを分散することができる
    - 正常に動作していないインスタンスを検知することもでき、そっちに流れないようにしてくれる  
    なので、複数のAZに分散することもできるし、リージョンにも分散することもできる
    - HTTP/HTTPS、TCPの分散にも
- EC2 Auto Scaring
    - サーバーの負荷があった場合、インスタンスの複製を行って負荷分散を行うもの

## テクニカルセッション2
- Elastic Block Store(EBS)
    - そもそもElasticって？
        - 伸縮性
        - サーバーの容量などを必要に応じで増やすこをができる
    - WindowsにおけるCドラDドラ。OSを格納するのもEBS。
    - レイテンシーとは
        - 遅延。EBSでは鄭遅延でパフォーマンスを提供している
    - レプリケーション(レプリケート)とは
        - 複製。AZ内で自動的にEBSが複製され、運用を継続することができる
    - 間違って消してしまっても、S3にスナップショット(バックアップ)が保存される
        - 障害があっても、スナップショットから復元可能
    - Iops(インプット・アウトプット・パーセカンド)
    - EBSにもさまざまなタイプを選択・変更することができるし、不要であれば削除もできる
- Simple Storage Service(S3)
    - 常にオンラインでアクセス可能なので、いつでもどこでも保存/取り出しができる
    - スケーラビリティ、信頼性、耐久性に優れているかつ、高速
    - データをオブジェクトとして、「バケット」に保存する
        - 「実態」自体も保存される
        - バケットの名前は世界中でひとつ。重複することはできない
        - オブジェクトの容量は5TBまで、バケットは100個まで作成できる
    - オブジェクトストレージとも、ブロックストレージともいわれる
    - データはリージョンの中に「冗長化」されて保存される
        - 破損、文字化けを防ぐことができる
    - スケーラビリティにも対応
    - S3をwebサーバーとして、静的コンテンツの提供もできる
- Relational Database Service(RDS)
    - マネージド型サービス
        - サービスがサーバのマネジメントを行うこと
    - 様々なDBエンジンを使うことができる(mysqlやpostgreなど)
    - 容量も伸縮することもできる
    - VPCの中にDBインスタンスを構築して使用する
        - 通常はプライベートサブネットに配置して運用する
        - AZを分けることもでき、「フェイルオーバー」で別AZのDBを見に行くこともできる
            - マスターに障害が起きても、スタンバイレプリカに移行することができる
        - リードレプリカ
            - プライマリマスタ０から非同期レプリケーションをおこなったもの
            - 必要に応じてマスターに昇格することができる
            - select文でのデータアクセス等に使用される

## テクニカルセッション3
- AWSのセキュリティ
    - 責任共有モデル
        - セキュリティの責任範囲を定義するもの
        - サービスが責任を負うもの、利用者が責任を負うものとで分かれている
        - AWSは基盤サービスなど運用に関する責任を取る
        - 利用者は、自分のデータやアプリ、ネットワークなどに関して責任を取る
    - VPCのネットワーク制御
        - ファイアウォール
            - インスタンスレベルやサブネットレベルで指定が可能 
    - IAM
        - AWS Identity and Access MAnagement
        - 認可、認証を担うもの
        - ユーザー、グループ、ロールを作成し、それらに権限を付与するためのポリシーを決める
            - ポリシーはJSON形式で定義され、サービスの他、アクセスIPも定義することができる
        - IAMロール
            - 権限を定義しておいて、ユーザーに対して引き受け、解除できるような仕組み
            - EC2に対しても設定ができる
            - 複数のアカウントに対しても同じIAMロールを引き受けることができる
        - ベストプラクティス
            - 権限があるユーザーに対してはワンタイムトークンを使用した二段階ログインを設定
            - 1人に対してひとつのIAMユーザーを用意し、グループを使って権限を割り当てるようにする
            - 権限の設定は最小限にする
            - パスワードポリシーは協力にする
            - IAMロールを積極的に利用する

## テクニカルセッション４
- Well-Architected Freamework
    - クラウド最適化のためのフレームワーク
    - AWSを使うときにはこういうことを使うといいよ的なものをまとめたもの
    - 定期的なレビューと改善によって、`Well-Architected`(クラウドにより最適化された)なシステムに、というのがコンセプト
    - プログラミング言語におけるそれとは意味合いが異なる
    - 誰でも内容を確認することができる
    - AWSエキスパートが作成した質問が用意されていて、それがヒントとなっている  
    その質問を確認することによって、自然とシステムがベストプラクティスなものに生まれ変わるように導く
    - 5つの柱
        - 運用上の優秀性
        - セキュリティ
        - 信頼性
        - パフォーマンス効率
        - コストの最適化
- 料金
    - 従量課金制(使った分だけ課金)
    - リザーブドインスタンス(予約による値引き)
        - DBなど、長期間稼働するのがわかっているものに関して
    - 使えば使うほど、または拡大に合わせて支払いが値引きされる
    - EC2インスタンス
        - linux、Ubuntuは秒単位、Windowsは時間単位
    - S3
        - 操作の回数に関して課金

## テクニカルセッション5
- デモンストレーション
    - Internet GatewayはひとつのVPCに対して0～1個作ることができる
    - VPXのウィザードによって、一発でVPCを作ることもできる
    - AMIで新しいEC2インスタンスを作成することもできる
    - ロードバランサーが提供する分散は、負荷がかかっていない方を優先して分散させるアルゴリズムが設定されている
    - スケールアウト：インスタンスが増える
    - スケールイン：インスタンスが減る



## その他メモ
- AWSが選ばれている理由について → AWS10の理由
- ホワイトペーパーにAWSに関するベストプラクティスがあるよ
- EC2にはフェイルオーバーはない、代わりにロードバランサー経由で負荷分散ができる
- RDSインスタンス上にはAWSが用意するミドルウェア等はインストールが不可能
    - かわりに、EC2インスタンスでzabbix監視する、的なことはできる